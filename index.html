<!DOCTYPE html>
<html>
<head>

    <meta id="viewport" name="viewport"
          content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet"
          type="text/css"/>
    <link href="mycss.css" rel="stylesheet" type="text/css"/>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="jcanvas.min.js"></script>
    <script src="vex.combined.min.js"></script>
    <script src="jquery.cookie.js"></script>
    <script>vex.defaultOptions.className = 'vex-theme-os';</script>
    <link rel="stylesheet" href="vex.css"/>
    <link rel="stylesheet" href="vex-theme-os.css"/>

    <script>window.enablesend = false</script>

</head>
<body>

<script src="phantomlimb.js"></script>

<canvas id="myCanvas"></canvas>

<script src="drawcanvas.js"></script>
<script src="detectmobile.js"></script>

<div class="headertop" id="header">
    Drag Finger to Drive Bot
    <p></p>
    <input type="checkbox" class="checkboxtop" id="check"><label for="check">Enable Driving</label>

</div>

<script>

    window.accesstoken = $.cookie('accesstoken') || "accesstoken";
    window.deviceid = $.cookie('deviceid') || "deviceid";

    if ($.cookie('accesstoken')) {
        accesstoput = "value=\"" + window.accesstoken + "\"";
    }
    else {
        accesstoput = "placeholder=\"Access Token\"";
    }
    if ($.cookie('deviceid')) {
        devicetoput = "value=\"" + window.deviceid + "\"";
    }
    else {
        devicetoput = "placeholder=\"Device ID\"";
    }

    vex.dialog.open({
        message: 'Enter your accesstoken and deviceid:',
        input: "<input name=\"accesstoken\" type=\"text\" " + accesstoput + " required />\n<input name=\"deviceid\" type=\"text\" " + devicetoput + " required />",
        buttons: [
            $.extend({}, vex.dialog.buttons.YES, {
                text: 'Submit'
            })
        ],
        callback: function (data) {
            if (data === false) {
                return console.log('Cancelled');
            }


            window.accesstoken = data.accesstoken;
            window.deviceid = data.deviceid;

            $.cookie('accesstoken', window.accesstoken, { expires: 7, path: '/' });
            $.cookie('deviceid', window.deviceid, { expires: 7, path: '/' });

            (!isMobile.any) && window.phantomLimb.start();
            console.log('accesstoken: ', data.accesstoken, 'deviceid: ', data.deviceid);
        }
    });


    $("#check").button();

    $('#check').click(function () {
        window.enablesend = !window.enablesend;
        console.log("Driving Enabled?:" + window.enablesend);
    });


    $('.headertop').hover(
            function () {
                //When over the header, disable phantomlimb
                !isMobile.any && window.phantomLimb.stop()
            },
            function () {
                //When off the header, enable phantomlimb
                !isMobile.any && window.phantomLimb.start();
            }
    );


</script>


<div class="footerleft" id="left">
    L (power):
    <div id="lValue">0</div>
</div>
<div class="footerright" id="right">
    R (power):
    <div id="rValue">0</div>
</div>


</body>
</html>
